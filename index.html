<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Win The Market!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Win The Market!!!</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/CS209-StockMarket/project" class="btn">View on GitHub</a>
      <a href="https://github.com/CS209-StockMarket/project/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/CS209-StockMarket/project/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>

<p>Welcome! For our final project, we attempt to use machine learning algorithms to predict the trends of the stock market, specificallly the S&P500 index. Our goal is to predict whether the index will go up or down by the end
of a particular week. So essentially we are faced with a binary classification problem. Our baseline, or the worst we can achieve is a 50% accuracy through randomly guessing up or down. We want to improve on that by choosing appropriate
data to train our classifiers on. </p>
<img src="images/cartoon.jpg" alt="red dice"  class="inline" width="350" height="500"/>

<h3>
<a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Our Motivation</h3>

If the stock market was predictable, then wouldn't everybody be making money??? Yes, that's why there have been countless attempts made to find some patterns in it from complicated mathematical models to sentiment analysis of tweets. 
But unfortunately, none have succeeded so far, and the ones that have succeeded would probably keep it a secret. 

Due to the large volume of information generated by the stock market everyday, we have a lot of data to work with. This is perfect for training machine learning algorithms and testing our classifiers since we will not run out of
data to work with.  

Step1.
Step2.
Step3.

<h3>
<a id="creating-pages-manually" class="anchor" href="#creating-pages-manually" aria-hidden="true"><span class="octicon octicon-link"></span></a>Our Data</h3>

<img src="images/Bloomberg_logo.jpg" alt="bloomberg"  width="290" height="200"/>
<img src="images/Quandl_Logo_Text.png" alt="quandl"  width="280" height="200"/>
<img src="images/yahoo.png" alt="yahoo" width="200" height="200"/>

<p>We pulled data from Bloomberg, the Federal Reserve Bank, Yahoo Finance and Quandl. Fortunately, the data we looked for were freely available and easy to access. We looked at data related to the S&P500 index such as the pricing
of its options, its volatility index, and the stocks closely related to it. We also looked at data that have been known to affect the movement of the S&P500 index such as the consumer price index (<a href="https://en.wikipedia.org/wiki/Consumer_price_index">CPI</a>), <a href="https://en.wikipedia.org/wiki/Money_supply">M2</a> (a measure of money supply),
real <a href="https://en.wikipedia.org/wiki/Gross_domestic_product">GDP</a> (gross domestic product), and the yields of treasury bonds. In addition, we looked at the stock indices of global markets such as Germany, Hong Kong, Paris etc. 
Our rationale for this is that because of globalization, markets nowadays are rarely isolated. For example, the fall of Lehman Brothers affected stock markets all over the world. Similarly, an important event in Germany or Hong Kong could
affect the market in the US. Thus we take the representative stock indices of these global markets into account as well.</p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Our Methods</h3>
<img src="images/sklearn.png" alt="sklearn" width="250" height="200"/>

<p>The machine learning algorithms we used are from the sklearn package in Python. We used Random Forest Classification, Support Vector Machines (SVM),  </p>
<!--<p>You can <a href="https://github.com/blog/821" class="user-mention">@mention</a> a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributorâ€™s GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>-->

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Our Results</h3>
<p>The first method we used is <a href="https://en.wikipedia.org/wiki/Random_forest">Random Forest Classification</a> and the data is simply the attributes of the S&P500 index itself. We wanted to see if just by looking at simple attributes such as the opening/closing price and high/low of each day, we
could improve on our baseline model. As expected, our accuracy was around 50%, so no improvement.</p>


<img src="images/5.png" />
<p>As seen from this chart, the most separable features are DJI and NASDAQ, with distinct conditioned distribution of return. This of course makes sense as they both represent the US stock market overall and a number of stocks are overlapping with that in the basket of S&P 500. However, DJI and NASDAQ would not serve to be good indicators because they appear the same time as S&P 500. More useful information is global indices, which are determined before the close (or even open) of NYSE and NASDAQ - we can act on such information. An interesting observation is that S&P 500 is more closely related to European indices (DAX, Frankfurt, London and Paris) and they are fairly separable, while for Asian and Australian market, the two distributions are barely separable.</p>

<img src="images/1.png" />
<p>The figure above shows the trends of the indices are highly correlated.
Dow Jones (DJI) contains 30 large companies and is also contained in S&P 500, weighted differently. The trend of Dow Jones is largely overlapping with S&P 500 but eventually outperforms by a margin. The reason for that is that the constant rebalancing of Dow Jones removes the companies that are no longer considered as "big and representative", and every rebalancing has a bigger effect given that it counts 1/30 of the composite. Such companies with good earning statistics will outperform in the long run.
Noticably, between 1999 and 2001, NASDAQ rocketed up but later dropped down almost instantly by more than a half. This is the famous "Dot com bubble" when people got over-excited about high tech companies and resulted in highly overvalued stocks, which is not sustainable. Recently since 2013, NASDAQ soared up again against DJI and S&P, indicating the good investment values in the growing small sized tech companies.</p>

<img src="images/index_plot.png" alt="trend fitting" />
<p>This figure shows that mostly the global indices are correlated, although not as significant as DJI and NASDAQ. The global macroecomomic trends drives the indices. In drastic events like the financial crisis (2008-2009), dot-com bubble influence the global market in all.</p>

<img src="images/2.png" />
<p>Time series plot of the S&P 500 daily return shows constant mean (by symmetry) but not covariance stationary. Large variances happen at time stamps of severe market events (usually bad) - 2008 to 2009 financial crisis, for example. Such property makes it a little hard to apply time series models that generally requires covariance stationarity. We then explore using GARCH to fit this return sequence in section 4.</p>

<img src="images/4.png" />
<p>To test the normality of the return sequence, we plot the histogram of all returns. Even though it looks fairly normal, we should pay attention to the extrema at both tails.</p>

<img src="images/15.png" />
<p>This autocorrelation is very random with no clear pattern of previous memory. This suggests the future returns are hardly correlated with the return standing today, i.e. no momentum.</p>

<img src="images/14.png" />
<p>The cross correlation of S&P 500 vs DJI daily returns shows again very random fluctuations. This indicates we cannot act on DJI last information to predict S&P 500 future returns.</p>

<img src="images/corr.png" alt="correlation matrix" class="inline"/>
<p>Next, we looked a variety of factors such as the Nasdaq index, currency exchange rate, treasury bond yields and prices of commodities(corn, sugar, gold etc). We created a correlation matrix for these features as seen in the figure below. The darker red spots means the corresponding items are highly correlated, whereas the dark blue spots mean they are highly uncorrelated.
From the graph, we can see that Nasdaq's index and international indices are highly correlated with S&P's price. 
</p>

<img src="images/11.png" />
<p>Plotting Kalman filtered time series at the tail of the S&P 500.</p>

<img src="images/10.png" />
<p>Here we compare the daily trend of the Kalman filtered result vs. observed market trend, where a "True" is a up, and a "False" is a down.</p>

<a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusion</h3>
<p>Time series models are implemented to fit the S&P 500 trend and forecast. ARIMA fitted the log return with a prediction power of 53%. GARCH model is used to characterize the variance of the time series. Kalman filtering constantly adjust the prediction time series by including the new information. The fitted data has a trend fitting power of over 80%.</p>

<!--<img src="images/3.png" />
<img src="images/6.png" />
<img src="images/7.png" />
<img src="images/8.png" />
<img src="images/9.png" />
<img src="images/12.png" />
<img src="images/13.png" />
-->

<h3>
  References and Image sources:<br>
  [1]www.wikiwealth.com<br>
  [2]www.ticbeat.com<br>
  [3]www.play.google.com<br>
  [4]http://francescopochetti.com<br>
</h3>

        </section>
      </div>
    </div>

  
  </body>
</html>
